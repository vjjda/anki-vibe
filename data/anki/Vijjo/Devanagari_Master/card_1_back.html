<div class="card-content">
    <div class="header">
        <span class="char-small">{{Character}}</span>
        <span class="name">{{Name}}</span>
        <span class="ipa">/{{IPA}}/</span>
    </div>
    
    <!-- Character Audio -->
    <div class="char-audio">{{Audio_Character}}</div>
    
    <hr>
    
    <div class="meta">{{Category}} <br> {{Description}}</div>
    
    <div class="stroke-container">
        <div id="stroke-1" class="stroke-box">{{Image_Stroke_1}}</div>
        <div id="stroke-2" class="stroke-box">{{Image_Stroke_2}}</div>
    </div>
    
    <div class="examples">
        <div class="ex-label">Examples</div>
        
        <!-- Example Table -->
        <div class="example-container" id="ex-container"></div>
        
        <!-- Examples Audio -->
        <div class="ex-audio-container">{{Audio_Examples}}</div>
    </div>

    <!-- Hidden Data -->
    <div id="raw-ex" style="display:none">{{Examples}}</div>
    <div id="raw-ex-ipa" style="display:none">{{Example_IPAs}}</div>
    <div id="raw-ex-mean" style="display:none">{{Example_Meanings}}</div>

    <script>
    (function() {
        // 1. Example Table Logic
        var exEl = document.getElementById("raw-ex");
        var ipaEl = document.getElementById("raw-ex-ipa");
        var meanEl = document.getElementById("raw-ex-mean");
        var container = document.getElementById("ex-container");
        
        if (exEl && container) {
            var words = exEl.innerText.split(" | ");
            var ipas = ipaEl ? ipaEl.innerText.split(" | ") : [];
            var means = meanEl ? meanEl.innerText.split(" | ") : [];
            
            if (words.length > 0 && words[0]) {
                var html = '<table class="ex-table">';
                for (var i = 0; i < words.length; i++) {
                    var w = words[i].trim();
                    if (!w) continue;
                    var p = ipas[i] ? ipas[i].trim() : "";
                    var m = means[i] ? means[i].trim() : "";
                    
                    html += '<tr>' +
                            '<td class="ex-word">' + w + '</td>' +
                            '<td class="ex-ipa">/' + p + '/</td>' +
                            '<td class="ex-mean">' + m + '</td>' +
                            '</tr>';
                }
                html += '</table>';
                container.innerHTML = html;
            } else {
                container.innerHTML = "<em>No examples available.</em>";
            }
        }

        // 2. Stroke Order Logic
        var s1 = document.getElementById("stroke-1");
        var s2 = document.getElementById("stroke-2");
        
        if (s1 && s2) {
            // Check if s1 has an image content
            var hasImg1 = s1.querySelector('img') !== null;
            if (hasImg1) {
                s2.style.display = 'none'; // Hide s2 if s1 exists
            } else {
                // If s1 is empty/no-image, keep s2 visible (default)
                s1.style.display = 'none'; // Hide empty s1 container
            }
        }
    })();
    </script>
</div>